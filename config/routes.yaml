# === PAGES / NAV ===
home:
  label: "ğŸ  Home"
  route: "/"
  method: "GET"
  description: "Landing page."
  visible: true

crop_page:
  label: "âœ‚ï¸ Crop 20 + Code (Page)"
  route: "/crop"
  method: "GET"
  description: "Open the Crop page to start Drive-based cropping."
  visible: true

ocr_page:
  label: "ğŸ” OCR (Page)"
  route: "/ocr"
  method: "GET"
  description: "Open the OCR page to run YOLO + CRNN and merge results."
  visible: true

inspection_page:
  label: "ğŸ§ª Inspection (Models Page)"
  route: "/inspection"
  method: "GET"
  description: "Open the ML inspection controls."
  visible: true

manual_inspection_page:
  label: "ğŸ§‘â€âš–ï¸ Manual Inspection (Page)"
  route: "/manual_inspection"
  method: "GET"
  description: "Open the manual inspection viewer."
  visible: true

verify_init:
  label: "ğŸ“ Start Verification (Page)"
  route: "/verify_init"
  method: "GET"
  description: "Start the mismatch verification UI."
  visible: true


# === PIPELINE (CROP â†’ SPLIT â†’ OCR) ===
crop_drive:
  label: "âœ‚ï¸ Run Crop 20 + Code"
  route: "/crop_drive"
  method: "POST"
  description: "Detect top 20 lasers + unique code and write crops to Drive."
  visible: true

split_drive:
  label: "ğŸ§© Split Laser 20 â†’ Body/Critical/Laser2 (PNG)"
  route: "/split_drive"
  method: "POST"
  description: "From Laser-20 crops, save lossless PNGs to Body, Critical, and Laser2 Drive folders."
  visible: true

run_pipeline:
  label: "ğŸš€ Run Full OCR Pipeline"
  route: "/run_pipeline"
  method: "POST"
  description: "Run YOLO and CRNN inference and prepare mismatches for review."
  visible: true


# === VERIFICATION (MISMATCH REVIEW) ===
verify_data:
  label: "ğŸ“¥ Load Verification Items"
  route: "/verify_data"
  method: "GET"
  description: "Fetch mismatches (or all when requested) for the verify UI."
  visible: false

save_verifications:
  label: "ğŸ’¾ Save Corrections"
  route: "/save_verifications"
  method: "POST"
  description: "Persist user-entered code corrections back to Drive."
  visible: true

apply_corrections_alias:
  label: "ğŸ’¾ Save Corrections (Alias)"
  route: "/apply_corrections"
  method: "POST"
  description: "Alias for /save_verifications."
  visible: false


# === INSPECTION JOBS (MODEL CLASSIFICATION) ===
inspect_critical:
  label: "ğŸ§ª Inspect Critical"
  route: "/inspect_critical"
  method: "POST"
  description: "Run Critical classification."
  visible: true

inspect_laser:
  label: "ğŸ”¦ Inspect Laser"
  route: "/inspect_laser"
  method: "POST"
  description: "Run Laser classification."
  visible: true

inspect_body:
  label: "ğŸ§ Inspect Body (CoaT)"
  route: "/inspect_body"
  method: "POST"
  description: "Run Body classification using CoaT."
  visible: true

classify_body:
  label: "ğŸ§ Body â†’ CoaT (Direct)"
  route: "/classify/body"
  method: "POST"
  description: "Direct body classifier endpoint."
  visible: false


# === MANUAL INSPECTION (VIEWER + ACTIONS) ===
manual_data:
  label: "ğŸ“¦ Manual Data (for Viewer)"
  route: "/manual_data"
  method: "GET"
  description: "Serve items + model votes for the manual inspection viewer."
  visible: true

manual_decision:
  label: "âœ… Set Decision (Base-aware)"
  route: "/manual/decision"
  method: "POST"
  description: "Record GOOD/DEFECTIVE decision."
  visible: true

manual_confirm_toggle:
  label: "ğŸ”• Toggle Confirm Good"
  route: "/manual/confirm_toggle"
  method: "POST"
  description: "Enable/disable confirm modal."
  visible: false

manual_undo:
  label: "â†©ï¸ Undo (Manual)"
  route: "/manual/undo"
  method: "POST"
  description: "Undo last manual decision action."
  visible: true

manual_items:
  label: "ğŸ“ƒ Manual Items (Legacy Panels)"
  route: "/manual_items"
  method: "GET"
  description: "Legacy list endpoint for older UI."
  visible: false

rewrite_label:
  label: "âœï¸ Rewrite Single Model Label"
  route: "/rewrite_label"
  method: "POST"
  description: "Override a model vote for one image."
  visible: false

undo:
  label: "â†©ï¸ Undo (Generic)"
  route: "/undo"
  method: "POST"
  description: "Generic undo stack endpoint."
  visible: false

mark_defective_and_hide_root:
  label: "ğŸ™ˆ Mark Defective & Hide Root"
  route: "/mark_defective_and_hide_root"
  method: "POST"
  description: "Hide an entire root group from manual inspection queue."
  visible: false


# === DEFECT-ONLY FOLDERS ===
prepare_defects:
  label: "ğŸ—‚ï¸ Prepare Defect Folders"
  route: "/prepare_defects"
  method: "POST"
  description: "Copy only defective images into defect folders."
  visible: true

prepare_defect_folders_alias:
  label: "ğŸ—‚ï¸ Prepare Defect Folders (Alias)"
  route: "/prepare_defect_folders"
  method: "POST"
  description: "Alias; same as /prepare_defects."
  visible: true

prepare_defects_status:
  label: "ğŸ“ˆ Prepare Defects Status"
  route: "/prepare_defects/status"
  method: "GET"
  description: "Status for the defect-folder build."
  visible: false


# === JOB STATUS / PROXY ===
job_status:
  label: "ğŸ“Š Job Status"
  route: "/job_status"
  method: "GET"
  description: "Check status for jobs."
  visible: true

proxy:
  label: "ğŸ›°ï¸ Proxy Remote Image"
  route: "/proxy"
  method: "GET"
  description: "Proxy remote/Drive image."
  visible: false

proxy_image:
  label: "ğŸ›°ï¸ Proxy Drive Image (by id)"
  route: "/image/<file_id>"
  method: "GET"
  description: "Serve a Drive image by file id."
  visible: false


# === MASTER / AUTOMATION ===
automation_start:
  label: "ğŸ§° Automation Start"
  route: "/automation/start"
  method: "POST"
  description: "Start the full pipeline (canonical)."
  visible: true

automation_status:
  label: "ğŸ§° Automation Status"
  route: "/automation/status"
  method: "GET"
  description: "Check pipeline status."
  visible: true

master_start_alias:
  label: "ğŸ§° Master Start (Alias)"
  route: "/master/start"
  method: "POST"
  description: "Alias for /automation/start."
  visible: true

master_status_alias:
  label: "ğŸ§° Master Status (Alias)"
  route: "/master/status"
  method: "GET"
  description: "Alias for /automation/status."
  visible: true

export_die_reports:
  label: "ğŸ“„ Export Die Reports (2 CSVs)"
  route: "/export/die_reports"
  method: "POST"
  description: "Build die_all_models.csv + base_summary.csv"
  visible: true
